---
import Welcome from '../components/Welcome.astro';
import Layout from '../layouts/Layout.astro';
import { Resource } from "sst";
import { createClient } from "@openauthjs/openauth/client";

const client = createClient({
  issuer: Resource.Urls.auth,
  clientID: "api"
});

// if (!Astro.cookies.has("access_token")) {
  const auth = await client.authorize(
    Astro.url.origin + "/auth/callback",
    "code"
  );
  return Astro.redirect(auth.url, 308);
// }
// Welcome to Astro! Wondering what to do next? Check out the Astro documentation at https://docs.astro.build
// Don't want to use any of this? Delete everything in this file, the `assets`, `components`, and `layouts` directories, and start fresh.
---

<Layout>
	<Welcome />
</Layout>
